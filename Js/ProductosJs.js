const stockPerroAccesorio = [
  {
    categoria: 'Perro',
    nombre: 'Can Cat Monstruos Peluche Para Perros',
    descripcion: 'Peluche con cuerpo forrado con silicona',
    img: '/src/Multimedia/Images/AccesoriosPerro/CanCatMonstruosPelucheParaPerros.jpeg',
    precio: 2500,
    cantidad: 1,
    stock: 12,
    subcategoria: 'Accesorios',
    id: '1',
  },

  {
    categoria: 'Perro',
    nombre: 'Dixon Arnés para Perro Minnie',
    descripcion: 'Arnés para perro Minnie ajustable.',
    img: '/src/Multimedia/Images/AccesoriosPerro/DixonArnésparaPerroMinnie.jpeg',
    precio: 2000,
    cantidad: 1,
    stock: 20,
    subcategoria: 'Accesorios',
    id: '2',
  },

  {
    categoria: 'Perro',
    nombre: 'Dixon Correa Minnie',
    descripcion: 'Resistente gracias a la doble capa de nylon. Anilla en zona del agarre: útil para dispensador bolsas de caca.',
    img: '/src/Multimedia/Images/AccesoriosPerro/DixonCorreaMinnie.jpeg',
    precio: 2000,
    cantidad: 1,
    stock: 20,
    subcategoria: 'Accesorios',
    id: '3',
  },

  {
    categoria: 'Perro',
    nombre: 'Earth Rated Bolsa Desperdicio',
    descripcion: 'Bolsas Bio-degradables Earth Rated Bolsas extra largas y extra fuertes para proteger sus manos.',
    img: '/src/Multimedia/Images/AccesoriosPerro/EarthRatedBolsaDesperdicio.jpeg',
    precio: 1200,
    cantidad: 1,
    stock: 50,
    subcategoria: 'Accesorios',
    id: '4',
  },
  {
    categoria: 'Perro',
    nombre: 'Can Cat Monstruos Peluche Para Perros',
    descripcion: 'Peluche con cuerpo forrado con silicona',
    img: '/src/Multimedia/Images/AccesoriosPerro/CanCatMonstruosPelucheParaPerros.jpeg',
    precio: 2500,
    cantidad: 1,
    stock: 12,
    subcategoria: 'Accesorios',
    id: '5',
  },

  {
    categoria: 'Perro',
    nombre: 'Dixon Arnés para Perro Minnie',
    descripcion: 'Arnés para perro Minnie ajustable.',
    img: '/src/Multimedia/Images/AccesoriosPerro/DixonArnésparaPerroMinnie.jpeg',
    precio: 2000,
    cantidad: 1,
    stock: 20,
    subcategoria: 'Accesorios',
    id: '6',
  },

  {
    categoria: 'Perro',
    nombre: 'Dixon Correa Minnie',
    descripcion: 'Resistente gracias a la doble capa de nylon. Anilla en zona del agarre: útil para dispensador bolsas de caca.',
    img: '/src/Multimedia/Images/AccesoriosPerro/DixonCorreaMinnie.jpeg',
    precio: 2000,
    cantidad: 1,
    stock: 20,
    subcategoria: 'Accesorios',
    id: '7',
  },

  {
    categoria: 'Perro',
    nombre: 'Earth Rated Bolsa Desperdicio',
    descripcion: 'Bolsas Bio-degradables Earth Rated Bolsas extra largas y extra fuertes para proteger sus manos.',
    img: '/src/Multimedia/Images/AccesoriosPerro/EarthRatedBolsaDesperdicio.jpeg',
    precio: 1200,
    cantidad: 1,
    stock: 50,
    subcategoria: 'Accesorios',
    id: '8',
  },

  {
    categoria: 'Perro',
    nombre: 'Can Cat Monstruos Peluche Para Perros',
    descripcion: 'Peluche con cuerpo forrado con silicona',
    img: '/src/Multimedia/Images/AccesoriosPerro/CanCatMonstruosPelucheParaPerros.jpeg',
    precio: 2500,
    cantidad: 1,
    stock: 12,
    subcategoria: 'Accesorios',
    id: '9',
  },

  {
    categoria: 'Perro',
    nombre: 'Dixon Arnés para Perro Minnie',
    descripcion: 'Arnés para perro Minnie ajustable.',
    img: '/src/Multimedia/Images/AccesoriosPerro/DixonArnésparaPerroMinnie.jpeg',
    precio: 2000,
    cantidad: 1,
    stock: 20,
    subcategoria: 'Accesorios',
    id: '10',
  },

  {
    categoria: 'Perro',
    nombre: 'Dixon Correa Minnie',
    descripcion: 'Resistente gracias a la doble capa de nylon. Anilla en zona del agarre: útil para dispensador bolsas de caca.',
    img: '/src/Multimedia/Images/AccesoriosPerro/DixonCorreaMinnie.jpeg',
    precio: 2000,
    cantidad: 1,
    stock: 20,
    subcategoria: 'Accesorios',
    id: '11',
  },

  {
    categoria: 'Perro',
    nombre: 'Earth Rated Bolsa Desperdicio',
    descripcion: 'Bolsas Bio-degradables Earth Rated Bolsas extra largas y extra fuertes para proteger sus manos.',
    img: '/src/Multimedia/Images/AccesoriosPerro/EarthRatedBolsaDesperdicio.jpeg',
    precio: 1200,
    cantidad: 1,
    stock: 50,
    subcategoria: 'Accesorios',
    id: '12',
  },

  {
    categoria: 'Perro',
    nombre: 'Can Cat Monstruos Peluche Para Perros',
    descripcion: 'Peluche con cuerpo forrado con silicona',
    img: '/src/Multimedia/Images/AccesoriosPerro/CanCatMonstruosPelucheParaPerros.jpeg',
    precio: 2500,
    cantidad: 1,
    stock: 12,
    subcategoria: 'Accesorios',
    id: '13',
  },

  {
    categoria: 'Perro',
    nombre: 'Dixon Arnés para Perro Minnie',
    descripcion: 'Arnés para perro Minnie ajustable.',
    img: '/src/Multimedia/Images/AccesoriosPerro/DixonArnésparaPerroMinnie.jpeg',
    precio: 2000,
    cantidad: 1,
    stock: 20,
    subcategoria: 'Accesorios',
    id: '14',
  },

  {
    categoria: 'Perro',
    nombre: 'Dixon Correa Minnie',
    descripcion: 'Resistente gracias a la doble capa de nylon. Anilla en zona del agarre: útil para dispensador bolsas de caca.',
    img: '/src/Multimedia/Images/AccesoriosPerro/DixonCorreaMinnie.jpeg',
    precio: 2000,
    cantidad: 1,
    stock: 20,
    subcategoria: 'Accesorios',
    id: '15',
  },

  {
    categoria: 'Perro',
    nombre: 'Earth Rated Bolsa Desperdicio',
    descripcion: 'Bolsas Bio-degradables Earth Rated Bolsas extra largas y extra fuertes para proteger sus manos.',
    img: '/src/Multimedia/Images/AccesoriosPerro/EarthRatedBolsaDesperdicio.jpeg',
    precio: 1200,
    cantidad: 1,
    stock: 50,
    subcategoria: 'Accesorios',
    id: '16',
  },
];

let productosContainer = document.querySelector('#Productos_container');

let carrito = [];

// Funciones
//funcion para parcear a json y enviar el array al localStorage
const HandleJsonStorage = (array) => {
  let carritoJson = JSON.stringify(array);
  localStorage.setItem('CarritoJson', carritoJson);
};
//funcion para agregar productos al carrito
const agregarAlCarrito = (prodId) => {
  const existe = carrito.some(prod => prod.id === prodId)
  if(existe){
    const prod = carrito.map(prod => {
      if (prod.id === prodId){
        prod.cantidad++
      }
    })
  } else{
    const item = stockPerroAccesorio.find((prod) => prod.id === prodId);
    carrito.push(item);
  }
};

// fin Funciones

// recorremos array con forEach para asi crear las card y renderizar cada producto del array en el dom
const RenderProd= () =>{
stockPerroAccesorio.forEach((Producto) => {
  const div = document.createElement('div');
  div.classList.add('card');
  div.classList.add('carta1');
  div.innerHTML = `
  <img src="${Producto.img}"class="card-img-top img_card" alt="#">
        <div class="card-body">
        <h6 class="card-title">${Producto.nombre}</h6>
        <p class="font-text">${Producto.descripcion}</p>
        <p>Precio:${Producto.precio}$</p>
        <a href="#" class="btn btn-primary" id="agregar${Producto.id}">Agregar al carrito</a>
        </div>
    `;
  //agregamos el div creado a la variable del selector, en este caso productos container
  productosContainer.appendChild(div);
  //capturamos variable para el boton y ejecutamos la funcion de agregar al carrito ligada al evento click
  const boton = document.querySelector(`#agregar${Producto.id}`);
  boton.addEventListener('click', () => {
    agregarAlCarrito(Producto.id);
    HandleJsonStorage(carrito);
  });
})};

RenderProd();